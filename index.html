<!DOCTYPE html>
<html lang="es" class="bg-slate-50 antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control - Arte v5.5 (Full & Compact)</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- Font Awesome (solo √≠conos necesarios) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- Fuente similar a la de ChatGPT -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">

    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="estilos.css">
</head>
<body class="min-h-screen bg-slate-50 text-slate-800">
    <!-- Overlay de carga global -->
    <div id="loadingOverlay">
        <div class="loader"></div>
        <p id="loadingMessage">Cargando...</p>
    </div>

    <!-- Barra de navegaci√≥n superior -->
    <header class="bg-white/80 backdrop-blur border-b border-slate-200 sticky top-0 z-[100]">
        <div class="max-w-[1200px] mx-auto flex items-center justify-between px-4 py-2">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-xl bg-gradient-to-br from-red-500 to-amber-500 flex items-center justify-center shadow-sm">
                    <i class="fa-solid fa-pen-ruler text-white text-sm"></i>
                </div>
                <div class="flex flex-col leading-tight">
                    <span class="text-xs font-semibold tracking-tight text-slate-900">
                        Panel Arte v5.5
                    </span>
                    <span class="text-[10px] text-slate-400 -mt-0.5">
                        Fitwell Manufacturing ¬∑ Departamento de Artes
                    </span>
                </div>
            </div>

            <div class="flex items-center gap-4">
                <div class="hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-100 border border-slate-200/70">
                    <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                    <span id="statusText" class="text-[10px] font-medium text-slate-600">
                        Conectando con Firebase...
                    </span>
                </div>

                <button id="loginButton" class="text-[11px] px-3 py-1.5 rounded-full border border-slate-300 hover:bg-slate-100 flex items-center gap-2">
                    <i class="fa-regular fa-user text-[11px] text-slate-500"></i>
                    <span id="loginButtonText" class="text-slate-700">Iniciar sesi√≥n</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Contenido principal -->
    <main class="max-w-[1200px] mx-auto px-3 sm:px-4 py-3 sm:py-4 flex gap-3">
        <!-- Sidebar izquierda -->
        <aside class="hidden md:block w-56 shrink-0">
            <div class="bg-white border border-slate-200 rounded-2xl shadow-sm p-3 sticky top-[64px]">
                <h2 class="text-[11px] font-semibold text-slate-500 tracking-[0.12em] uppercase mb-2 flex items-center gap-1.5">
                    <i class="fa-solid fa-sliders text-[10px] text-slate-400"></i>
                    Navegaci√≥n
                </h2>
                <nav class="space-y-1.5 text-[11px]">
                    <button class="nav-tab active" data-target="tab-dashboard">
                        <i class="fa-solid fa-gauge-high text-[10px]"></i>
                        Dashboard
                    </button>
                    <button class="nav-tab" data-target="tab-orders">
                        <i class="fa-regular fa-clipboard text-[10px]"></i>
                        √ìrdenes
                    </button>
                    <button class="nav-tab" data-target="tab-workplan">
                        <i class="fa-regular fa-calendar-check text-[10px]"></i>
                        Plan Semanal
                    </button>
                    <button class="nav-tab" data-target="tab-designers">
                        <i class="fa-regular fa-user text-[10px]"></i>
                        Dise√±adores
                    </button>
                    <button class="nav-tab" data-target="tab-compare">
                        <i class="fa-solid fa-code-compare text-[10px]"></i>
                        Comparar Reportes
                    </button>
                </nav>

                <div class="mt-4 pt-3 border-t border-slate-100">
                    <h2 class="text-[11px] font-semibold text-slate-500 tracking-[0.12em] uppercase mb-1.5 flex items-center gap-1.5">
                        <i class="fa-solid fa-circle-info text-[9px] text-slate-400"></i>
                        Info R√°pida
                    </h2>
                    <ul class="space-y-1 text-[10px] text-slate-500">
                        <li class="flex items-center justify-between">
                            <span>√ìrdenes cargadas</span>
                            <span id="infoOrdersCount" class="font-semibold text-slate-700">0</span>
                        </li>
                        <li class="flex items-center justify-between">
                            <span>Dise√±adores</span>
                            <span id="infoDesignersCount" class="font-semibold text-slate-700">0</span>
                        </li>
                        <li class="flex items-center justify-between">
                            <span>Semana actual</span>
                            <span id="infoCurrentWeek" class="font-semibold text-slate-700">--</span>
                        </li>
                    </ul>
                </div>
            </div>
        </aside>

        <!-- Contenedor principal de tabs -->
        <section class="flex-1 space-y-3">
            <!-- Fila superior de acciones -->
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
                <div class="flex items-center gap-2">
                    <label for="fileInput" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-900 text-white text-[11px] font-medium shadow-sm cursor-pointer hover:bg-slate-800">
                        <i class="fa-solid fa-file-excel text-[11px]"></i>
                        <span>Cargar Working Process</span>
                    </label>
                    <input type="file" id="fileInput" accept=".xlsx,.xls" class="hidden">
                    
                    <button id="refreshButton" class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-slate-300 text-[11px] font-medium text-slate-700 bg-white hover:bg-slate-50">
                        <i class="fa-solid fa-rotate-right text-[10px]"></i>
                        <span>Refrescar datos</span>
                    </button>
                </div>

                <div class="flex items-center gap-2">
                    <button id="weeklyReportButton" class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-slate-300 text-[11px] font-medium text-slate-700 bg-white hover:bg-slate-50">
                        <i class="fa-regular fa-calendar-days text-[11px]"></i>
                        <span>Reporte semanal</span>
                    </button>
                    <button id="downloadBackupButton" class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-slate-300 text-[11px] font-medium text-slate-700 bg-white hover:bg-slate-50">
                        <i class="fa-solid fa-download text-[10px]"></i>
                        <span>Backup local</span>
                    </button>
                </div>
            </div>

            <!-- Tabs de contenido -->
            <div id="tab-dashboard" class="tab-content active">
                <!-- M√©tricas principales -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2.5">
                    <div class="card-stat">
                        <div class="card-stat-header">
                            <span class="card-stat-title">√ìrdenes activas</span>
                            <i class="fa-regular fa-clipboard card-stat-icon"></i>
                        </div>
                        <div class="card-stat-body">
                            <span id="statActiveOrders" class="card-stat-number">0</span>
                            <span class="card-stat-label">En cualquier estado distinto de Completada</span>
                        </div>
                    </div>

                    <div class="card-stat">
                        <div class="card-stat-header">
                            <span class="card-stat-title">√ìrdenes urgentes</span>
                            <i class="fa-regular fa-clock card-stat-icon"></i>
                        </div>
                        <div class="card-stat-body">
                            <span id="statUrgentOrders" class="card-stat-number text-amber-500">0</span>
                            <span class="card-stat-label">Despacho ‚â§ 2 d√≠as</span>
                        </div>
                    </div>

                    <div class="card-stat">
                        <div class="card-stat-header">
                            <span class="card-stat-title">Completadas hoy</span>
                            <i class="fa-regular fa-circle-check card-stat-icon"></i>
                        </div>
                        <div class="card-stat-body">
                            <span id="statCompletedToday" class="card-stat-number text-emerald-500">0</span>
                            <span class="card-stat-label">Marcadas como Completada hoy</span>
                        </div>
                    </div>

                    <div class="card-stat">
                        <div class="card-stat-header">
                            <span class="card-stat-title">Pr√≥ximos despachos</span>
                            <i class="fa-solid fa-truck-fast card-stat-icon"></i>
                        </div>
                        <div class="card-stat-body">
                            <span id="statUpcomingShipments" class="card-stat-number text-blue-500">0</span>
                            <span class="card-stat-label">Despachos en los pr√≥ximos 7 d√≠as</span>
                        </div>
                    </div>
                </div>

                <!-- Gr√°ficos -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-2.5 mt-3">
                    <div class="card-panel">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="card-panel-title">
                                Carga por dise√±ador
                            </h3>
                            <span id="chartDesignerHint" class="card-panel-badge">
                                Clic en nombre para filtrar
                            </span>
                        </div>
                        <div class="h-60">
                            <canvas id="designerLoadChart"></canvas>
                        </div>
                    </div>

                    <div class="card-panel">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="card-panel-title">
                                Estados de √≥rdenes (P_Art)
                            </h3>
                            <span class="card-panel-badge">
                                Bandeja / Producci√≥n / Auditor√≠a / Completada
                            </span>
                        </div>
                        <div class="h-60">
                            <canvas id="statusPieChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Alertas -->
                <div class="card-panel mt-3">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="card-panel-title">
                            Alertas de vencimiento
                        </h3>
                        <button id="toggleAlertsButton" class="text-[10px] text-slate-500 hover:text-slate-700">
                            Ver todas
                        </button>
                    </div>
                    <div id="alertsList" class="space-y-1.5 text-[11px] text-slate-600">
                        <!-- Alertas din√°micas -->
                    </div>
                </div>
            </div>

            <!-- TAB √ìRDENES -->
            <div id="tab-orders" class="tab-content hidden">
                <div class="card-panel mb-2">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 mb-2">
                        <div class="flex items-center gap-2">
                            <div class="relative">
                                <i class="fa-solid fa-magnifying-glass text-[10px] text-slate-400 absolute left-2.5 top-1/2 -translate-y-1/2"></i>
                                <input type="text" id="searchInput" placeholder="Buscar por cliente, estilo, team o c√≥digo..." class="input-sm pl-6 w-56">
                            </div>
                            <button id="clearFiltersButton" class="btn-ghost-sm">
                                <i class="fa-solid fa-eraser text-[10px]"></i>
                                Limpiar
                            </button>
                        </div>

                        <div class="flex flex-wrap items-center gap-2">
                            <select id="departamentoFilter" class="input-sm w-32">
                                <option value="">Depto: Todos</option>
                                <option value="P_Art">P_Art</option>
                                <option value="P_Order_Entry">P_Order_Entry</option>
                                <option value="P_Printing">P_Printing</option>
                                <option value="P_Press">P_Press</option>
                                <option value="P_Cut">P_Cut</option>
                                <option value="P_R_to_Sew">P_R_to_Sew</option>
                                <option value="P_Sew">P_Sew</option>
                                <option value="P_Packing">P_Packing</option>
                                <option value="P_Shipping">P_Shipping</option>
                            </select>

                            <select id="designerFilter" class="input-sm w-32">
                                <option value="">Dise√±ador: Todos</option>
                            </select>

                            <select id="statusFilter" class="input-sm w-32">
                                <option value="">Estado: Todos</option>
                                <option value="Bandeja">Bandeja</option>
                                <option value="Producci√≥n">Producci√≥n</option>
                                <option value="Auditor√≠a">Auditor√≠a</option>
                                <option value="Completada">Completada</option>
                            </select>

                            <button id="advancedFiltersToggle" class="btn-ghost-sm">
                                <i class="fa-solid fa-sliders text-[10px]"></i>
                                Filtros avanzados
                            </button>
                        </div>
                    </div>

                    <!-- Filtros avanzados -->
                    <div id="advancedFiltersPanel" class="bg-slate-50 border border-slate-200 rounded-xl p-2.5 mb-2 hidden">
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-x-2 gap-y-2 text-[10px]">
                            <div>
                                <label class="block text-[10px] text-slate-500 mb-0.5">Rango de fechas</label>
                                <div class="flex gap-1">
                                    <input type="date" id="dateFrom" class="input-sm w-full">
                                    <input type="date" id="dateTo" class="input-sm w-full">
                                </div>
                            </div>
                            <div>
                                <label class="block text-[10px] text-slate-500 mb-0.5">Cliente</label>
                                <input type="text" id="clientFilter" class="input-sm w-full" placeholder="Filtrar cliente">
                            </div>
                            <div>
                                <label class="block text-[10px] text-slate-500 mb-0.5">Estilo</label>
                                <input type="text" id="styleFilter" class="input-sm w-full" placeholder="Filtrar estilo">
                            </div>
                            <div>
                                <label class="block text-[10px] text-slate-500 mb-0.5">Team</label>
                                <input type="text" id="teamFilter" class="input-sm w-full" placeholder="Filtrar team">
                            </div>
                        </div>
                    </div>

                    <!-- Tabla de √≥rdenes -->
                    <div class="overflow-x-auto border border-slate-200 rounded-xl bg-white">
                        <table id="ordersTable" class="min-w-full text-[11px]">
                            <thead class="bg-slate-50/80 border-b border-slate-200">
                                <tr>
                                    <th class="th-sm w-8">
                                        <input type="checkbox" id="selectAllOrders">
                                    </th>
                                    <th class="th-sm w-20">Fecha</th>
                                    <th class="th-sm w-40">Cliente</th>
                                    <th class="th-sm w-32">C√≥digo</th>
                                    <th class="th-sm w-32">Estilo</th>
                                    <th class="th-sm w-32">Team</th>
                                    <th class="th-sm w-28">Depto</th>
                                    <th class="th-sm w-28">Dise√±ador</th>
                                    <th class="th-sm w-28">Estado</th>
                                    <th class="th-sm w-20 text-center">Pzs</th>
                                    <th class="th-sm w-20 text-center">Hijas</th>
                                    <th class="th-sm w-32">Notas</th>
                                    <th class="th-sm w-10"></th>
                                </tr>
                            </thead>
                            <tbody id="ordersTableBody" class="divide-y divide-slate-100">
                                <!-- Filas din√°micas -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Paginaci√≥n -->
                    <div class="flex items-center justify-between mt-2 text-[10px] text-slate-500">
                        <div class="flex items-center gap-2">
                            <span id="tableInfo">Mostrando 0 de 0 √≥rdenes</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <button id="prevPageButton" class="btn-ghost-xs">
                                <i class="fa-solid fa-chevron-left text-[9px]"></i>
                            </button>
                            <span id="currentPage" class="px-2 py-0.5 rounded-full bg-slate-100 text-slate-700 text-[10px]">
                                1
                            </span>
                            <button id="nextPageButton" class="btn-ghost-xs">
                                <i class="fa-solid fa-chevron-right text-[9px]"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Panel lateral: Detalle de orden -->
                <div id="orderDetailsPanel" class="card-panel mt-2 hidden">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="card-panel-title">
                            Detalle de la orden
                        </h3>
                        <button id="closeOrderDetailsButton" class="btn-ghost-xs">
                            Cerrar
                        </button>
                    </div>
                    <div id="orderDetailsContent" class="text-[11px] text-slate-600">
                        <!-- Contenido din√°mico -->
                    </div>
                </div>
            </div>

            <!-- TAB PLAN SEMANAL -->
            <div id="tab-workplan" class="tab-content hidden">
                <div class="card-panel mb-2">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 mb-2">
                        <div class="flex items-center gap-2">
                            <label class="text-[10px] text-slate-500">Semana:</label>
                            <input type="week" id="workPlanWeek" class="input-sm w-32">
                            <button id="loadWeekPlanButton" class="btn-ghost-sm">
                                <i class="fa-solid fa-arrow-rotate-right text-[10px]"></i>
                                Cargar plan
                            </button>
                        </div>
                        <div class="flex flex-wrap items-center gap-2">
                            <button id="addSelectedToWorkPlanButton" class="btn-primary-sm">
                                <i class="fa-solid fa-circle-plus text-[10px]"></i>
                                Agregar seleccionadas
                            </button>
                            <button id="loadUrgentToPlanButton" class="btn-ghost-sm">
                                <i class="fa-regular fa-clock text-[10px]"></i>
                                Cargar urgentes
                            </button>
                            <button id="exportWeekPlanPDFButton" class="btn-ghost-sm">
                                <i class="fa-solid fa-file-pdf text-[10px]"></i>
                                Exportar PDF
                            </button>
                        </div>
                    </div>

                    <div class="overflow-x-auto border border-slate-200 rounded-xl bg-white">
                        <table id="workPlanTable" class="min-w-full text-[11px]">
                            <thead class="bg-slate-50/80 border-b border-slate-200">
                                <tr>
                                    <th class="th-sm w-24">Orden</th>
                                    <th class="th-sm w-40">Cliente / Team</th>
                                    <th class="th-sm w-32">Estilo</th>
                                    <th class="th-sm w-24">Fecha Despacho</th>
                                    <th class="th-sm w-24">Pzs</th>
                                    <th class="th-sm w-24">Hijas</th>
                                    <th class="th-sm w-28">Dise√±ador</th>
                                    <th class="th-sm w-24">Estado plan</th>
                                    <th class="th-sm w-10"></th>
                                </tr>
                            </thead>
                            <tbody id="workPlanTableBody" class="divide-y divide-slate-100">
                                <!-- Filas din√°micas -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- TAB DISE√ëADORES -->
            <div id="tab-designers" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-[2fr,1fr] gap-2.5">
                    <div class="card-panel">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="card-panel-title">
                                Dise√±adores registrados
                            </h3>
                            <button id="refreshDesignersButton" class="btn-ghost-xs">
                                Refrescar
                            </button>
                        </div>
                        <div class="overflow-x-auto border border-slate-200 rounded-xl bg-white">
                            <table class="min-w-full text-[11px]">
                                <thead class="bg-slate-50/80 border-b border-slate-200">
                                    <tr>
                                        <th class="th-sm w-40">Nombre</th>
                                        <th class="th-sm w-40">Correo</th>
                                        <th class="th-sm w-16 text-center">√ìrdenes</th>
                                        <th class="th-sm w-10"></th>
                                    </tr>
                                </thead>
                                <tbody id="designersTableBody" class="divide-y divide-slate-100">
                                    <!-- Filas din√°micas -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card-panel">
                        <h3 class="card-panel-title mb-2">
                            Agregar dise√±ador
                        </h3>
                        <div class="space-y-1.5 text-[11px]">
                            <div>
                                <label class="block text-[10px] text-slate-500 mb-0.5">Nombre</label>
                                <input type="text" id="newDesignerName" class="input-sm w-full" placeholder="Nombre del dise√±ador">
                            </div>
                            <div>
                                <label class="block text-[10px] text-slate-500 mb-0.5">Correo corporativo</label>
                                <input type="email" id="newDesignerEmail" class="input-sm w-full" placeholder="usuario@fitwellus.com">
                            </div>
                            <button id="addDesignerButton" class="btn-primary-sm w-full mt-1.5">
                                <i class="fa-solid fa-user-plus text-[10px]"></i>
                                Registrar dise√±ador
                            </button>
                            <p class="text-[10px] text-slate-400">
                                Solo se aceptan correos <span class="font-mono">*@fitwellus.com</span>.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB COMPARAR REPORTES -->
            <div id="tab-compare" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-[1.2fr,1.8fr] gap-2.5">
                    <div class="card-panel">
                        <h3 class="card-panel-title mb-2">
                            Comparar dos archivos de Working Process
                        </h3>
                        <div class="space-y-2 text-[11px]">
                            <div>
                                <label class="block text-[10px] text-slate-500 mb-0.5">
                                    Archivo A (versi√≥n anterior)
                                </label>
                                <input type="file" id="compareFileA" accept=".xlsx,.xls" class="input-sm w-full">
                            </div>
                            <div>
                                <label class="block text-[10px] text-slate-500 mb-0.5">
                                    Archivo B (versi√≥n nueva)
                                </label>
                                <input type="file" id="compareFileB" accept=".xlsx,.xls" class="input-sm w-full">
                            </div>
                            <button id="runCompareButton" class="btn-primary-sm w-full mt-1.5">
                                <i class="fa-solid fa-code-compare text-[10px]"></i>
                                Ejecutar comparaci√≥n
                            </button>
                        </div>
                    </div>

                    <div class="card-panel">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="card-panel-title">
                                Resultado de la comparaci√≥n
                            </h3>
                            <span class="card-panel-badge">
                                Nuevas / Modificadas / Eliminadas
                            </span>
                        </div>
                        <div id="compareChartContainer" class="h-64 bg-slate-50 rounded-xl border border-slate-200 flex items-center justify-center">
                            <canvas id="compareChart"></canvas>
                        </div>
                        <div id="compareTableContainer"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal: agregar orden hija -->
    <div id="addChildModal" class="modal fixed inset-0 z-[900] flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4">
        <div class="modal-content bg-white rounded-2xl p-4 w-full max-w-md shadow-lg">
            <h2 class="font-semibold text-sm mb-1.5">Agregar orden hija</h2>
            <p class="text-[10px] text-slate-500 mb-2">
                Divide una orden grande en sub-√≥rdenes para control interno del departamento.
            </p>
            <div class="grid grid-cols-2 gap-2 text-[11px] mb-2">
                <div>
                    <label class="block text-[10px] text-slate-500 mb-0.5">N¬∞ hija</label>
                    <input type="number" id="childOrderNumber" class="input-sm w-full" min="1" value="1">
                </div>
                <div>
                    <label class="block text-[10px] text-slate-500 mb-0.5">Piezas</label>
                    <input type="number" id="childPieces" class="input-sm w-full" min="1" value="1">
                </div>
                <div>
                    <label class="block text-[10px] text-slate-500 mb-0.5">Fecha despacho hija</label>
                    <input type="date" id="childDeliveryDate" class="input-sm w-full">
                </div>
                <div>
                    <label class="block text-[10px] text-slate-500 mb-0.5">Notas</label>
                    <input type="text" id="childNotes" class="input-sm w-full" placeholder="Opcional">
                </div>
            </div>
            <div class="flex justify-end gap-2 mt-2">
                <button onclick="closeAddChildModal()" class="btn-ghost-sm">
                    Cancelar
                </button>
                <button onclick="saveChildOrder()" class="btn-primary-sm">
                    Guardar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Confirmaci√≥n -->
    <div id="confirmModal" class="modal fixed inset-0 z-[950] hidden items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4">
        <div class="modal-content bg-white rounded-2xl p-4 w-full max-w-sm shadow-lg">
            <h2 class="font-semibold text-sm mb-1.5">Confirmar acci√≥n</h2>
            <p id="confirmModalMessage" class="text-[11px] text-slate-600 mb-2">
                ¬øEst√°s seguro?
            </p>
            <div id="confirmStrictContainer" class="hidden mb-2">
                <label class="block text-[10px] text-slate-500 mb-0.5">
                    Escribe <span class="font-semibold">CONFIRMAR</span> para continuar:
                </label>
                <input type="text" id="confirmStrictInput" class="input-sm w-full" oninput="checkStrictInput()">
            </div>
            <div class="flex justify-end gap-2 mt-2">
                <button onclick="closeConfirmModal()" class="btn-ghost-sm">
                    Cancelar
                </button>
                <button id="confirmModalConfirm" class="btn-primary-sm">
                    Confirmar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Reporte Semanal (corregido con spinner) -->
    <div
        id="weeklyReportModal"
        class="modal fixed inset-0 z-[1000] flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4"
    >
        <div class="modal-content bg-white rounded-2xl p-6 w-full max-w-4xl h-[90vh] flex flex-col">
            <h2 class="font-bold text-xl mb-4">Reporte Semanal</h2>

            <div class="mb-4 flex gap-4">
                <input
                    type="week"
                    id="weekSelector"
                    onchange="generateWeeklyReport()"
                    class="rounded-lg border-slate-300 text-xs"
                />
            </div>

            <!-- üîÑ Spinner de carga del reporte semanal -->
            <div id="weeklyReportSpinner" class="spinner" style="display: none;"></div>

            <!-- Contenido del reporte -->
            <div
                id="weeklyReportContent"
                class="flex-1 overflow-y-auto bg-slate-50 rounded-xl p-4 border border-slate-200"
            ></div>

            <div class="flex justify-end gap-3 mt-4">
                <button
                    onclick="closeWeeklyReportModal()"
                    class="text-slate-600 font-medium text-xs"
                >
                    Cerrar
                </button>
                <button
                    onclick="exportWeeklyReportAsPDF()"
                    class="bg-red-600 text-white px-4 py-2 rounded-full text-xs font-medium"
                >
                    PDF
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
